<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Robotics, Artificial Intelligence and Entrepreneurship."><meta name=author content="Ugnius Malūkas"><meta property="og:title" content="Install CUDA 10.1, Anaconda and TensorFlow on Linux Mint 19.3"><meta property="og:description" content="A guide how to install CUDA, Anaconda and TensorFlow on Linux Mint 19.3."><meta property="og:type" content="article"><meta property="og:url" content="https://malukas.lt/blog/cuda-10-1-anaconda-tensorflow-on-linux-mint-19-3/"><meta property="og:image" content="https://malukas.lt/icon.png"><meta property="article:published_time" content="2020-02-03T00:00:00+00:00"><meta property="article:modified_time" content="2020-02-03T00:00:00+00:00"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><style type=text/css>html{overflow-y:scroll;padding:0;margin:0;height:100%}body{font-family:Helvetica,Arial,sans-serif;line-height:1.5;font-size:1em;background-color:#fff;color:#555;max-width:45em;padding:1em;margin:0 auto;text-align:justify;display:flex;flex-direction:column;height:100vh}header{margin-bottom:1.5em;line-height:1.3}footer{font-size:.9em;color:#ccc;width:100%;height:3em;display:flex;justify-content:space-between;align-items:center;margin-top:auto}.copyright{float:left}.social{float:right}.icon{margin:0 .2em}svg.icon{width:1.8em;height:1.8em;fill:#ccc}svg.icon:hover{fill:#ff3c3c}object{pointer-events:none}.navigation{font-size:1.2em;justify-content:space-between;align-items:center;flex-flow:row wrap;display:flex;margin-bottom:4em}nav a:not(:last-child){margin-right:1em}h1,h2,h3{font-weight:500;color:#333}h1 a{color:#000}h1 a:hover,h2 a:hover{text-decoration:none}header h1,header h2,header h3{margin:0}h1{font-size:2em}h2{margin-bottom:.5em;font-size:1.5em}h3{font-size:1.17em}a{text-decoration:none;color:#ff3c3c}a:hover{text-decoration:underline}pre{background:#eee}code{padding:.25em;vertical-align:text-bottom;white-space:nowrap}pre{padding:1em;overflow-x:auto}.gallery{justify-content:space-between;display:flex;margin:1em 0}.gallery img{width:100%}.gallery img:not(:last-child){margin-right:1em}.image img{margin-left:auto;margin-right:auto;display:block}.articles article{margin-bottom:2em}time{color:#888}</style><title>Install CUDA 10.1, Anaconda and TensorFlow on Linux Mint 19.3</title></head><body><header class=navigation><h1><a href=/ title="Home page">Ugnius Malūkas</a></h1><nav><a href=/blog/ title="Blog page">Blog</a>
<a href=/about/ title="About page">About</a></nav></header><main><article><header><h2>Install CUDA 10.1, Anaconda and TensorFlow on Linux Mint 19.3</h2><time datetime=2020-02-03>2020 Feb 03 Mon</time>
by <a href=/about class=author>Ugnius Malūkas</a></header><p>In order to install <em>TensorFlow</em> for <em>Nvidia</em> GPU (418.x+), <em>Nvidia CUDA</em> is needed. <em>TensorFlow</em> (2.1.0+) only supports <em>Nvidia CUDA</em> 10.1. That is why the newest <em>CUDA</em> version cannot be used here.</p><p>I use <em>Anaconda</em> because it helps to separate <em>Python</em> versions from system ones and manage dependencies without writing them into <em>Linux</em> system folders.</p><h3 id=install-cuda>Install CUDA</h3><h4 id=installation>Installation</h4><p>Be sure that you have already installed Nvidia GPU drivers. My recommendation is to install it through the Driver Manager.</p><p>If you need to install CUDA, cuDNN and TensorRT without APT repository, follow this tutorial: <a href=/blog/install-cuda-without-apt-repo-on-linux-mint/>Install CUDA 10.1 without APT repostory on Linux Mint 19.3</a>.</p><p>1) Add NVIDIA package repositories</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-repo-ubuntu1804_10.1.243-1_amd64.deb
sudo dpkg -i cuda-repo-ubuntu1804_10.1.243-1_amd64.deb
sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub
sudo apt-get update
wget http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64/nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.deb
sudo apt install ./nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.deb
sudo apt-get update</code></pre></div><p>2) Reboot your computer:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo reboot</code></pre></div><p>3) Check if GPU are visible using <code>nvidia-smi</code> command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ nvidia-smi</code></pre></div><p>4) Install <em>CUDA</em> and <em>cuDNN</em>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install --no-install-recommends <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    cuda-10-1 <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    libcudnn7<span style=color:#f92672>=</span>7.6.4.38-1+cuda10.1  <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    libcudnn7-dev<span style=color:#f92672>=</span>7.6.4.38-1+cuda10.1</code></pre></div><p>5) Install <em>TensorRT</em> required by <em>TensorFlow</em>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install -y --no-install-recommends libnvinfer6<span style=color:#f92672>=</span>6.0.1-1+cuda10.1 <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    libnvinfer-dev<span style=color:#f92672>=</span>6.0.1-1+cuda10.1 <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    libnvinfer-plugin6<span style=color:#f92672>=</span>6.0.1-1+cuda10.1</code></pre></div><h3 id=install-tensorflow-with-anaconda>Install TensorFlow with Anaconda</h3><p>1) Download <em>Anaconda</em> for <em>Python 3.7</em> from <a href=https://www.anaconda.com/distribution/#linux rel=noreferrer target=_blank>https://www.anaconda.com/distribution/#linux</a>.</p><p>2) Run the installation:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ chmod u+x Anaconda3-X.Y.Z-Linux-x86_64.sh
$ ./Anaconda3-X.Y.Z-Linux-x86_64.sh</code></pre></div><p>3) In the end of <em>Anaconda</em> installation write <code>yes</code> when <em>Anaconda</em> asks &ldquo;Do you wish the installer to initialize Anaconda3
by running conda init?&ldquo;.</p><p>4) <em>Optional:</em> When <em>Anaconda</em> is installed, it is activated by default when a new terminal is open. To prevent this, use this command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ conda config --set auto_activate_base false</code></pre></div><p>5) Close and open terminal.</p><p>6) Create <em>TensorFlow</em> environment for <em>Python 3.7</em>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ conda create -n tensorflow python<span style=color:#f92672>=</span>3.7</code></pre></div><p>7) Activate the created environment:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ conda activate tensorflow</code></pre></div><p>8) Install <em>TensorFlow</em> <code>GPU</code> version</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>(</span>tensorflow<span style=color:#f92672>)</span>$ pip install tensorflow-gpu<span style=color:#f92672>=</span><span style=color:#f92672>=</span>1.13.1</code></pre></div><p>9) Install missing libraries:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>conda install cudatoolkit
conda install cudnn</code></pre></div><h4 id=verify-installation>Verify Installation</h4><p>1) For verifying <em>TensorFlow</em> installation, one of options is to use <code>ipython</code>. If it is not installed, use this command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>(</span>tensorflow<span style=color:#f92672>)</span>$ pip install ipython.</code></pre></div><p>2) Open <code>ipython</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>(</span>tensorflow<span style=color:#f92672>)</span>$ ipython</code></pre></div><p>3) Check if <em>TensorFlow</em> is installed and a GPU is being used:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>(</span>tensorflow<span style=color:#f92672>)</span>$ pip install ipython.

In <span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: import tensorflow as tf 
   ...: print<span style=color:#f92672>(</span>tf.test.is_built_with_cuda<span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>)</span>  </code></pre></div><p>The result should be similar to this output:</p><div class=image><img width=100% height=auto src=ipython-output.png alt="ipython output"></div><h3 id=reference-list>Reference List</h3><ul><li><a href=https://docs.nvidia.com/cuda/archive/10.1/cuda-installation-guide-linux/index.html rel=noreferrer target=_blank>NVIDIA CUDA Installation Guide for Linux</a></li><li><a href=https://www.tensorflow.org/install/gpu rel=noreferrer target=_blank>TensorFlow GPU Support</a></li></ul><h3 id=tested-on>Tested on</h3><ul><li>Lenovo Legion Y740 with Nvidia GeForce 2060</li></ul></article></main><footer><div class=copyright>© 2020 Ugnius Malūkas</div><div class=social><a href=https://github.com/ugnelis><svg class="icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m256 0C115.390625.0.0 115.390625.0 256c0 119.988281 84.195312 228.984375 196 256v-84.695312c-11.078125 2.425781-21.273438 2.496093-32.550781-.828126-15.128907-4.464843-27.421875-14.542968-36.546875-29.910156-5.816406-9.8125-16.125-20.453125-26.878906-19.671875l-2.636719-29.882812c23.253906-1.992188 43.371093 14.167969 55.3125 34.230469 5.304687 8.921874 11.410156 14.152343 19.246093 16.464843 7.574219 2.230469 15.707032 1.160157 25.183594-2.1875 2.378906-18.972656 11.070313-26.074219 17.636719-36.074219v-.015624c-66.679687-9.945313-93.253906-45.320313-103.800781-73.242188-13.976563-37.074219-6.476563-83.390625 18.238281-112.660156.480469-.570313 1.347656-2.0625 1.011719-3.105469-11.332032-34.230469 2.476562-62.546875 2.984375-65.550781 13.078125 3.867187 15.203125-3.890625 56.808593 21.386718l7.191407 4.320313c3.007812 1.792969 2.0625.769531 5.070312.542969 17.371094-4.71875 35.683594-7.324219 53.726563-7.558594 18.179687.234375 36.375 2.839844 54.464844 7.75l2.328124.234375c-.203124-.03125.632813-.148437 2.035157-.984375 51.972656-31.480469 50.105469-21.191406 64.042969-25.722656.503906 3.007812 14.128906 31.785156 2.917968 65.582031-1.511718 4.65625 45.058594 47.300781 19.246094 115.753906-10.546875 27.933594-37.117188 63.308594-103.796875 73.253907v.015624c8.546875 13.027344 18.816406 19.957032 18.761719 46.832032v105.722656c111.808594-27.015625 196-136.011719 196-256 .003906-140.609375-115.386719-256-255.996094-256zm0 0"/></svg></a><a href=https://www.linkedin.com/in/malukas/><svg class="icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m437 0H75C33.648438.0.0 33.648438.0 75v362c0 41.351562 33.648438 75 75 75h362c41.351562.0 75-33.648438 75-75V75c0-41.351562-33.648438-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.539062-13.460938-30-30-30s-30 13.460938-30 30v120h-60V196h60v11.308594C286.71875 202.421875 296.929688 196 316 196c40.691406.042969 75 36.546875 75 79.6875zm0 0"/></svg></a></div></footer></body></html>